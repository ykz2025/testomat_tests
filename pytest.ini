# Section header that marks the start of pytest configuration
[pytest]


# Requires pytest version 8.0 or higher; fails if an older version is used
minversion = 8.0


# Specifies the directory where pytest looks for tests (the tests/ folder)
testpaths = tests


# Defines filename patterns for test file discovery
# Files starting with test_ or ending with _test.py or _tests.py
python_files = test_*.py *_test.py *_tests.py


# Defines function naming pattern - only functions starting with test_ are collected as tests
python_functions = test_*


# Directories to skip during test collection to speed up discovery
norecursedirs = .git .venv .claude .idea __pycache__ build dist


# Default command-line options applied to every pytest run
addopts =
# Verbose output - shows individual test names
    -v
# Shows summary of all test outcomes except passed (r=report, a=all except passed)
    -ra
# Raises error if using undefined markers (enforces marker registration)
    --strict-markers
# Short traceback format for failures (less verbose than full)
    --tb=short
# Playwright: runs browser in visible mode (not headless)
    --headed
# Playwright: directory for trace files
    --output=test-result/traces/
# pytest-html plugin: generates HTML report at this path
    --html=test-result/report.html
# Embeds CSS/JS in HTML report (single file, no external dependencies)
    --self-contained-html


# Registers custom markers to categorize tests
markers =
# Marker for quick smoke tests
    smoke: Quick smoke tests for basic functionality
# Marker for full regression suite
    regression: Full regression test suite
# Marker for web UI tests
    web: Web UI tests using Playwright
# Marker for long-running tests
    slow: Tests that take longer to execute


# Shows progress bar/dots during test run instead of verbose list
console_output_style = progress


# Enables live logging to console during test execution
log_cli = true


# Minimum log level to display (INFO and above)
log_cli_level = INFO


# Log message format with timestamp and level
log_cli_format = %(asctime)s [%(levelname)s] %(message)s


# Date/time format for log timestamps
log_cli_date_format = %Y-%m-%d %H:%M:%S


# If a test marked @pytest.mark.xfail unexpectedly passes, it fails the suite (prevents stale xfails)
xfail_strict = true

